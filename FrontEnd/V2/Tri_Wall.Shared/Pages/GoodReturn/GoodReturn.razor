@page "/goodreturn"
@rendermode InteractiveWebAssembly
@using Tri_Wall.Shared.Views.GoodReturn.MobileAppScreen
@inherits MvvmComponentBase<GoodReturnViewModel>
@* @attribute [StreamRendering] *@
<PageTitle>Good Return</PageTitle>

<AuthorizeView Context="anotherName">
    <Authorized>
        <FluentGrid Spacing="2" OnBreakpointEnter="@UpdateGridSize" AdaptiveRendering="true">
        </FluentGrid>
        @if (_init)
        {
            @if (_isXs)
            {
                <GoodReturnDashboard/>
            }
            else
            {
                <GoodReturnDefault Token="@anotherName.User.FindFirst("token")?.Value"
                                   ViewModel="ViewModel"
                                   Visible="_visible"/>
            }
        }

        <FluentOverlay @bind-Visible=@_visible
                       Opacity="0.4"
                       FullScreen="true"
                       OnClose="OnCloseOverlay"
                       PreventScroll=true>
            <FluentProgressRing/>
        </FluentOverlay>
    </Authorized>
</AuthorizeView>